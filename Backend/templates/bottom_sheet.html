<button id="toggleBtn" class="toggle-btn">Detalhes</button> 

<div id="sheet" aria-hidden="false">
  <div class="handle"></div>
  <div id="sheet-content">
    <h3>Detalhes da rota</h3>
    
    <!-- SeÃ§Ã£o de resumo da rota (MANTIDA INTACTA) -->
    <div id="route-summary">
      <div><strong>DistÃ¢ncia:</strong> <span id="route-distance">-</span></div>
      <div><strong>DuraÃ§Ã£o:</strong> <span id="route-duration">-</span></div>
    </div>
    <div id="sheet-info">InformaÃ§Ãµes da rota aparecerÃ£o aqui.</div>
    
    <!-- Controles de OtimizaÃ§Ã£o (MANTIDOS) -->
    <div id="optimization-controls" class="optimization-section">
      <h4>âš™ï¸ OtimizaÃ§Ã£o de Rota</h4>
      
      <div class="constraint-group">
        <label class="constraint-label">
          <strong>Evitar:</strong>
        </label>
        <div class="constraint-options">
          <label class="checkbox-wrapper">
            <input type="checkbox" id="avoid-toll" name="avoid" value="toll">
            <span>ğŸ’° PedÃ¡gios</span>
          </label>
          <label class="checkbox-wrapper">
            <input type="checkbox" id="avoid-unpaved" name="avoid" value="unpaved">
            <span>ğŸ›¤ï¸ Estradas de terra</span>
          </label>
          <label class="checkbox-wrapper">
            <input type="checkbox" id="avoid-highway" name="avoid" value="highway">
            <span>ğŸ›£ï¸ Rodovias</span>
          </label>
          <label class="checkbox-wrapper">
            <input type="checkbox" id="avoid-ferry" name="avoid" value="ferry">
            <span>â›´ï¸ Balsas</span>
          </label>
        </div>
      </div>
      
      <div class="constraint-group">
        <label class="constraint-label">
          <strong>Preferir:</strong>
        </label>
        <div class="constraint-options">
          <label class="radio-wrapper">
            <input type="radio" id="prefer-fastest" name="prefer" value="fastest" checked>
            <span>âš¡ Mais rÃ¡pida</span>
          </label>
          <label class="radio-wrapper">
            <input type="radio" id="prefer-shortest" name="prefer" value="shortest">
            <span>ğŸ“ Mais curta</span>
          </label>
        </div>
      </div>
      
      <div id="optimization-status" class="optimization-status" style="display: none;">
        <!-- Status da otimizaÃ§Ã£o aparecerÃ¡ aqui -->
      </div>
    </div>
    
    <!-- InformaÃ§Ãµes extras da rota (MANTIDA INTACTA) -->
    <div id="route-extra" class="route-extra"></div>
    
    <!-- ğŸ†• LEGENDA DE TRÃFEGO -->
    <div id="traffic-legend" class="traffic-legend" style="display: none; margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
      <h4 style="margin: 0 0 12px 0; font-size: 0.95em; color: #495057;">ğŸš¦ Legenda de TrÃ¡fego</h4>
      <div style="display: flex; flex-direction: column; gap: 10px; font-size: 0.85em;">
        <div style="display: flex; align-items: center; gap: 10px;">
          <div style="width: 35px; height: 8px; background: #00FF00; border-radius: 4px;"></div>
          <span>TrÃ¡fego leve (>70%)</span>
        </div>
        <div style="display: flex; align-items: center; gap: 10px;">
          <div style="width: 35px; height: 8px; background: #FFFF00; border-radius: 4px;"></div>
          <span>TrÃ¡fego moderado (40-70%)</span>
        </div>
        <div style="display: flex; align-items: center; gap: 10px;">
          <div style="width: 35px; height: 8px; background: #FF0000; border-radius: 4px;"></div>
          <span>TrÃ¡fego pesado (<40%)</span>
        </div>
      </div>
      <div id="incident-summary" style="margin-top: 15px; padding: 12px; background: #fff3cd; border-left: 4px solid #ffc107; border-radius: 6px; font-size: 0.85em; display: none;">
        <!-- Resumo de incidentes aparecerÃ¡ aqui via JS -->
      </div>
    </div>
  </div>
</div>